[user]
    name = Andrew Stevens
    email = andxyz.stevens@gmail.com

[core]
    pager = less -FRSX
    editor = subl -n -w
    excludesfile = /Users/andxyz/.gitignore_global
    autocrlf = input
    whitespace = trailing-space,space-before-tab,tab-in-indent

[apply]
    whitespace = warn

[color]
    ui = auto

[push]
    default = simple

[branch]
    # git help -w git-config # see branch.autosetuprebase
    autosetupmerge = always
    autosetuprebase = always

# this is messing up cocoapod podspecs
#  [url "ssh://git@github.com/"]
#   insteadOf = https://github.com/

[alias]
    ## andxyz favorite git shortcuts
    p = pull
    f = fetch --all
    fm = fetch origin master:master
    ls = ls-files
    diffc = diff --cached
    unstage = reset HEAD --

    ## branch hunting
    branch-list-by-date = for-each-ref --sort='-committerdate' --format='%(committerdate:iso8601) %(authoremail) %(refname)'

    ## personal git log opinions
    log      = log --topo-order --graph --pretty=format:'%Cred[%h]%Creset%Cgreen[%ci]%C(bold blue)[%aN]%Creset%C(yellow)%d%Creset %s'
    logpatch = log --decorate=full --no-merges --topo-order --patch

    logpnopager = --no-pager log

    # commit investigation
    logpatchcodeonly = log --topo-order --no-merges --patch
    logponeline      = log --topo-order --decorate --abbrev-commit --pretty=format:'%Cred %h %Creset%Cgreen[%ai]%C(bold blue)[%aN]%Creset %s%C(yellow)%d%Creset'
    logpstat         = log --topo-order --color --stat=180,150 --pretty='format: %Cgreen%h%Creset%Cblue by %aN, %ci%Creset  %s%Cred%d%Creset%n'
    logpmerges       = log --topo-order --merges --decorate --pretty=format:'%Cred %h %Creset%Cgreen[%ai]%C(bold blue)[%aN]%Creset %s%C(yellow)%d%Creset'

    # graphing
    logpgraphstat     = log --topo-order --color --stat=180,150 --pretty='format: %Cgreen%h%Creset%Cblue by %aN, %ci%Creset  %s%Cred%d%Creset%n' --graph
    logpgraphoneliner = log --topo-order --graph --color --all --pretty='format: %Cgreen%h%Creset %s%Cred%d%Creset%n'

    ## git log commands used on a github flow feature branch PR
    logpr        = log --topo-order --graph --decorate --boundary origin/master... --pretty=format:'%Cred %h %Creset%Cgreen[%ai]%C(bold blue)[%aN]%Creset %s%C(yellow)%d%Creset'
    logprpatch   = log --topo-order --decorate=full --no-merges --boundary origin/master... --patch
    logprshowrefs = log --topo-order --graph --decorate --boundary origin/master... --oneline
    logprsimple  = log --topo-order --graph --decorate --boundary origin/master... --pretty=format:'%Cred[%h]%Creset%Cgreen[%ai]%C(bold blue)[%aN]%Creset %s'

    ## git show views
    show0 = show --pretty="full" --stat
    show1 = show --stat=180,150 --pretty="oneline"
    show2 = show --pretty="full" --name-only
    show3 = show --pretty="oneline" --name-only

    ## code review
    code-review-reset-and-unstage-to = !bash -c 'git reset --soft ${1} && git reset HEAD -- ' -
    openunstaged = "!$EDITOR_USING_CURRENT_PROJECT $(git diff --diff-filter AM --name-only)"
    openstaged = "!$EDITOR_USING_CURRENT_PROJECT $(git diff --diff-filter AM --name-only --cached)"

    ## depends on hub
    github-pulls = "!hub browse -- pulls/"
    github-mypulls = "!hub browse -- pulls/andxyz"
    github-open-pull-request = "!hub pull-request"

    ## not really used aliasaes but they are useful to look at when hunting for a git command
    delete-remote-branch = push origin --delete
    delete-local-branch = branch -D

    ## git formatting tips
    # http://stackoverflow.com/questions/16286517/how-to-toggle-the-date-format-of-git-log-how-to-display-both-relative-and-abs
    # http://stackoverflow.com/questions/8576503/how-can-i-make-git-log-order-based-on-authors-timestamp
    # http://git-scm.com/docs/git-for-each-ref

    # andxyz diff magic
    diffks = difftool --tool=Kaleidoscope
    diffvim = difftool --tool=use_vim_diff
    diffmvim = difftool --tool=use_mvim_diff
    diffp4 = difftool --tool=p4merge
    mergeks = mergetool --tool=Kaleidoscope
    # https://github.com/scottgonzalez/pretty-diff
    # diffpretty = !$HOME/bin/pretty-diff/pretty-diff.js

    # http://tbaggery.com/2011/08/08/effortless-ctags-with-git.html
    # ctags = !.git/hooks/ctags

    # searching git for stuff
    # http://travisjeffery.com/b/2012/02/search-a-git-repo-like-a-ninja/
    ggrep = grep --break --heading --line-number
    alias = config --get-regexp ^alias\\.

#
# git grep tips
#
# http://travisjeffery.com/b/2012/02/search-a-git-repo-like-a-ninja/
#
[grep]
    lineNumber = true
    extendRegexp = true

#
# perforce p4merge aint so great, just buy http://www.kaleidoscopeapp.com/
#
# perforce p4merge setup as the mergetool
# http://www.perforce.com/product/components/perforce-visual-merge-and-diff-tools
# the gist https://gist.github.com/toolbear/861192
# you must have a ~/bin/p4merge file
#
[mergetool "p4merge"]
    cmd = p4merge "$BASE" "$REMOTE" "$LOCAL" "$MERGED"
    keepTemporaries = false
    trustExitCode = false
    keepBackup = false

[difftool "p4merge"]
    cmd = "p4merge $LOCAL $REMOTE"

#
# Vim and its variants difftool setups
#
[difftool "use_vim_diff"]
    cmd = vim -d "$LOCAL" "$REMOTE"
    prompt = false
    keepBackup = false
    keepTemporaries = false

[difftool "use_mvim_diff"]
    cmd = mvim -d -f "$LOCAL" "$REMOTE"
    prompt = false
    keepBackup = false
    keepTemporaries = false

#
# Kaleidoscope
#
[mergetool "Kaleidoscope"]
    cmd = ksdiff --merge --output \"$MERGED\" --base \"$BASE\" -- \"$LOCAL\" --snapshot \"$REMOTE\" --snapshot

[difftool "Kaleidoscope"]
    cmd = ksdiff --partial-changeset --relative-path \"$MERGED\" -- \"$LOCAL\" \"$REMOTE\"

[diff]
    tool = Kaleidoscope
    keepBackup = false
    keepTemporaries = false

[merge]
    tool = Kaleidoscope
    keepBackup = false
    keepTemporaries = false
    trustExitCode = false

[mergetool]
    tool = Kaleidoscope
    keepBackup = false
    keepTemporaries = false
    trustExitCode = false
    prompt = false

#
# sourcetree
#
[difftool "sourcetree"]
    cmd = opendiff \"$LOCAL\" \"$REMOTE\"
[mergetool "sourcetree"]
    cmd = /Applications/SourceTree.app/Contents/Resources/opendiff-w.sh \"$LOCAL\" \"$REMOTE\" -ancestor \"$BASE\" -merge \"$MERGED\"
    trustExitCode = true

#
# ctags are kind of a pain when they run wild
#
# http://tbaggery.com/2011/08/08/effortless-ctags-with-git.html
#[init]
#    templatedir = ~/.git_template

#
# better man pages for git, using the website git-scm.com
#
# Thanks to http://twitter.com/rtomayko/status/199572965434728448
# https://gist.github.com/2601550#
# example:
# `git help -w remote `
#
# The new git-scm.com site includes man pages designed for pleasant viewing in a web browser:
# http://git-scm.com/docs
#
# The commands below can be used to configure git to open these pages when
# using `git help -w <command>' from the command line. Just enter the config
# commands in your shell to modify your ~/.gitconfig file.
[browser "gitscm"]
    cmd = /bin/sh -c 'open http://git-scm.com/docs/$(basename $1 .html)' --
[help]
    browser = gitscm

#
# andxyz secret stuff (github auth tokens etc etc)
#
[include]
    path            = ~/.gitconfig-private

# how to setup the helper https://help.github.com/articles/caching-your-github-password-in-git/
[credential]
	helper = osxkeychain
[init]
    templatedir = ~/.git-template

## mailmap fixes peoples emails
## try `git shortlog -sne`
[log]
    mailmap = true
[mailmap]
    file = ~/.mailmap-private
